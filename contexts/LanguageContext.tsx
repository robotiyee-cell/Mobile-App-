import React, { useState, useEffect, useCallback } from 'react';
import AsyncStorage from '@react-native-async-storage/async-storage';
import createContextHook from '@nkzw/create-context-hook';

export type Language = 'en' | 'tr';

interface LanguageContextType {
  language: Language;
  setLanguage: (lang: Language) => Promise<void>;
  t: (key: string) => string;
  languageLabel: string;
  setUserIdForContext: (id: string | null) => void;
}

const translations = {
  en: {
    // Header
    appName: 'Looks4Fun',
    appDescription: 'Look for fun with ai fashion review',
    
    
    // Settings
    settings: 'Settings',
    language: 'Language',
    selectLanguage: 'Select Language',
    english: 'English',
    turkish: 'Turkish',
    apply: 'Apply',
    changesSaved: 'Changes saved',
    
    // Upload Section
    uploadYourOutfit: 'Upload Your Outfit',
    uploadSubtitle: 'Take a photo or choose from gallery to get your outfit rated',
    takePhoto: 'Take Photo',
    chooseFromGallery: 'Choose from Gallery',
    
    // Privacy
    privacyProtected: 'Privacy Protected',
    privacyMatters: 'ðŸ”’ Your Privacy Matters',
    privacyExplanation: 'Your face is automatically masked before sending to AI analysis. Only your outfit is analyzed, ensuring your identity remains private.',
    faceProtected: 'Face Protected',
    
    // Categories
    chooseStyleCategory: 'Choose Your Style Category',
    categorySubtitle: 'Select the style you\'re aiming for to get a more targeted analysis',
    sexy: 'Hot',
    elegant: 'Elegant',
    casual: 'Casual',
    naive: 'Naive',
    trendy: 'Trendy',
    anime: 'Anime',
    sixties: '60\'s',
    sarcastic: 'Designer Roast',
    allCategories: 'All Categories',
    
    // Category descriptions
    sexyDesc: 'Bold, alluring, confident',
    elegantDesc: 'Sophisticated, refined, graceful',
    casualDesc: 'Relaxed, comfortable, everyday',
    naiveDesc: 'Sweet, innocent, youthful',
    trendyDesc: 'Fashion-forward, current, stylish',
    animeDesc: 'Kawaii, colorful, playful',
    sixtiesDesc: 'Retro, mod, vintage vibes',
    sarcasticDesc: 'Sarcastic critique in a famed designer tone',
    custom: 'Custom',
    customDesc: 'Define your own style (e.g., "Bohemian", "Y2K", "K-Pop")',
    enterCustomStyle: 'Enter Custom Style',
    customStylePlaceholder: 'e.g., Bohemian, Cottagecore, Y2K, Minimalist',
    startCustomAnalysis: 'Start Custom Analysis',
    allCategoriesDesc: 'Get results for all 7 categories',
    
    // Design Match
    findDesignMatchButtonHeader: 'Find Design Match',
    designMatchHeader: 'Design Match',
    designMatchAnalysisResults: 'Design Match Analysis Results',
    exactMatch: 'Exact Match',
    closestSuggestions: 'Closest Suggestions',
    confidence: 'Confidence',
    nonFashionTitle: 'This image is not a fashion product',
    nonFashionSubtitle: 'It looks like a cartoon/parody/fictional character; an exact brand/design match may not exist.',
    nonFashionAction: 'We instead suggest brands with similar humor, color palette, and silhouette.',
    
    // Analysis
    analyzing: 'Analyzing...',
    rateMyOutfit: 'Rate My Outfit',
    yourStyleScore: 'Your Style Score',
    overallStyleScore: 'Overall Style Score',
    selectedStyle: 'Selected Style:',
    analyzedForStyle: 'Analyzed for Style:',
    analysisType: 'Analysis Type:',
    
    // Analysis sections
    styleAnalysis: 'Style Analysis',
    colorCoordination: 'Color Coordination',
    accessories: 'Accessories',
    overallHarmony: 'Overall Harmony',
    overallAnalysis: 'Overall Analysis',
    categoryBreakdown: 'Category Breakdown',
    improvementSuggestions: 'Improvement Suggestions',
    trendInsights: 'Trend Insights',
    viewTrendInsights: 'View Trend Insights',
    generatingTrends: 'Generating trend insights...',
    emailSupport: 'E-Mail',
    export: 'Export',
    exportAnalysis: 'Export Analysis',
    analysisTakingLong: 'This is taking longer than usual',
    photoMaybeIrrelevant: 'The photo may not be relevant to the selected style. Do you want to try a different photo?',
    tryDifferentPhoto: 'Try Different Photo',
    continue: 'Continue',
    exported: 'Exported',
    htmlDownloaded: 'HTML downloaded. Attach it to your email.',
    
    // Buttons
    newPhoto: 'New Photo',
    chooseDifferentPhoto: 'Choose Different Photo',
    changeStyleCategory: 'Change Style Category',
    changeRatingCategory: 'Change Rating Category',
    backToCategories: 'Back to Categories',
    rateNewOutfit: 'Rate New Outfit',
    back: 'Back',
    save: 'Save',

    // Extra action copy
    rateThisOutfit: 'Rate This Outfit',
    chooseCategoryForTargetedAnalysis: 'Choose a category to get a targeted analysis, or select general rating',
    allCategories7Results: 'All Categories (7 Results)',
    categoryBreakdown7: 'Category Breakdown - 7 Separate Results',
    suggestionsFor: 'Suggestions for {category}:',
    noCategoryResults: 'No category results available',
    rateThisOutfitDifferentCategory: 'Rate this same outfit with a different style category',
    chooseDifferentStyleCategory: 'Choose Different Style Category',
    clearHistory: 'Clear History',

    // History
    yourRatingHistory: 'Your Rating History',
    historySubtitle: 'Your last {count} outfit ratings with privacy protection',
    maxItems: 'Max',
    noRatingsYet: 'No ratings yet',
    noRatingsSubtext: 'Upload your first outfit to get started!',
    clearHistoryTitle: 'Clear History',
    clearHistoryConfirm: 'This will delete all saved ratings. Are you sure?',
    cancel: 'Cancel',
    clear: 'Clear',
    cleared: 'Cleared',
    historyCleared: 'Your rating history was cleared.',
    couldNotClearHistory: 'Could not clear history. Please try again.',

    // Terms
    termsTitle: 'Terms and Conditions',
    copyrightNoticeTitle: 'Copyright Notice',
    copyrightNotice: 'Copyright (Â©) 2024 Looks4Fun. All rights reserved. Unauthorized copying or distribution is prohibited.',
    termsOfUseTitle: 'Terms of Use',
    termsIntro: 'By using this application ("L4F"), you agree to the following terms and conditions:',
    copyrightProtectionTitle: '1. Copyright Protection',
    copyrightProtectionText: 'This application and all its contents, including but not limited to design, code, graphics, text, and functionality, are protected by copyright law and owned by Looks4Fun.',
    prohibitedActivitiesTitle: '2. Prohibited Activities',
    prohibitedActivitiesBullets: 'You are strictly prohibited from:\nâ€¢ Copying, reproducing, or distributing any part of this application\nâ€¢ Reverse engineering or attempting to extract source code\nâ€¢ Creating derivative works based on this application\nâ€¢ Using this application for commercial purposes without permission\nâ€¢ Removing or modifying copyright notices',
    privacyAndDataTitle: '3. Privacy and Data',
    privacyAndDataText: 'Your privacy is important to us. Face masking technology is used to protect your identity during AI analysis. Only outfit data is processed, ensuring your personal information remains secure.',
    intellectualPropertyTitle: '4. Intellectual Property',
    intellectualPropertyText: 'All intellectual property rights in this application remain with Looks4Fun. No rights are granted to users except for personal, non-commercial use as outlined in these terms.',
    violationsTitle: '5. Violations',
    violationsText: 'Any violation of these terms may result in immediate termination of your access to the application and potential legal action.',
    contactTitle: '6. Contact',
    contactText: 'For permissions, licensing inquiries, or questions about these terms, contact: Looks4Fun',
    acceptTermsLabel: 'I Accept the Terms and Conditions',
    continueToApp: 'Continue to App',

    // Subscription
    freePlan: 'Free Plan',
    basicPlan: 'Basic Plan',
    premiumPlan: 'Premium Plan',
    ultimatePlan: 'Ultimate Plan',
    upgrade: 'Upgrade',
    manage: 'Manage',
    month: 'month',
    year: 'year',
    analysesRemaining: '{count} analyses remaining today',
    unlimitedAnalyses: 'Unlimited analyses remaining',
    premiumFeatureTitle: 'Premium Feature',
    premiumAllMessage: 'The "All Categories" analysis is available for Premium and Ultimate subscribers only. Upgrade now to analyze your outfit across all 7 style categories!',
    premiumFeatureUnlock: 'Premium Feature - Upgrade to unlock',
    currentPlan: 'Current Plan',
    expires: 'Expires:',
    upgradeToPremiumHeader: 'Upgrade to L4F Premium',
    upgradeToPremiumSub: 'Unlock unlimited style analysis and premium features',
    chooseYourPlan: 'Choose Your Plan',
    chooseYourPlanSub: 'Select the perfect plan for your style journey',
    mostPopular: 'MOST POPULAR',
    priceFree: 'Free',
    currentPlanCta: 'Current Plan',
    downgrade: 'Downgrade',
    subscribe: 'Subscribe',
    loadingPlans: 'Loading subscription plans...',

    // Checkout / Payments
    payment: 'Payment',
    paymentMethod: 'Payment Method',
    email: 'Email',
    password: 'Password',
    firstName: 'First Name',
    surname: 'Surname',
    cardNumber: 'Card Number',
    expiry: 'Expiry (MM/YY)',
    cvc: 'CVC',
    payNow: 'Pay Now',
    applePay: 'Apple Pay',
    googlePay: 'Google Pay',
    creditDebitCard: 'Credit/Debit Card',
    cancelAction: 'Cancel',
    notAvailableOnWeb: 'Not available on web preview',
    notAvailableInExpoGo: 'This method requires a store build and is not available in Expo Go. Use card as a demo.',
    enableTestMode: 'Enable Test Mode',
    testModeActive: 'Test Mode (No Card Required)',
    testModeWarning: 'Test mode enabled - No payment required for testing',

    // Plan Feature texts
    freeFeature1: '3 outfit analyses per day',
    freeFeature2: 'Basic style categories',
    freeFeature3: 'Limited history (5 items)',
    freeFeature4: 'Standard support',
    freeFeature5: 'â€”',
    freeFeature6: 'â€”',

    basicFeature1: '15 outfit analyses per day',
    basicFeature2: 'Basic style categories',
    basicFeature3: 'Extended history (25 items)',
    basicFeature4: 'Standard support',
    basicFeature5: 'Improvement Suggestions',
    basicFeature6: 'Design Match',

    premiumFeature1: 'Unlimited outfit analyses',
    premiumFeature2: 'All categories (7 results)',
    premiumFeature3: 'Unlimited history',
    premiumFeature4: 'Detailed improvement suggestions',
    premiumFeature5: 'Email support',
    premiumFeature6: 'Export analysis results',
    premiumFeature7: 'Design Match',

    ultimateFeature1: 'Everything in Premium',
    ultimateFeature2: 'Advanced AI Analysis',
    ultimateFeature3: 'Priority support',
    ultimateFeature4: 'Style trend insights',
    ultimateFeature5: 'Early access to new features',
    ultimateFeature6: 'â€”',
    ultimateFeature7: 'â€”',
    ultimateFeature8: 'â€”',
    ultimateFeature9: 'â€”',
    ultimateFeature10: 'â€”',
    whyPremium: 'Why Choose L4F Premium?',
    benefitAdvancedAI: 'Advanced AI Analysis',
    benefitAdvancedAIDesc: 'Get detailed insights with our most sophisticated AI models',
    benefitUnlimited: 'Unlimited Analyses',
    benefitUnlimitedDesc: 'Analyze as many outfits as you want, whenever you want',
    benefitPrivacy: 'Privacy Protected',
    benefitPrivacyDesc: 'Your photos are always protected with face masking technology',
    benefitGrowth: 'Personal Style Growth',
    benefitGrowthDesc: 'Track your style evolution with unlimited history and insights',
    footerBullets: 'â€¢ Cancel anytime â€¢ No hidden fees â€¢ Secure payments',
    footerRenew: 'Subscriptions auto-renew unless cancelled 24 hours before renewal',
    successTitle: 'Success! ðŸŽ‰',
    successWelcome: 'Welcome to L4F {plan}! Your subscription is now active.',
    startAnalyzing: 'Start Analyzing',
    failedSubscription: 'Failed to process subscription. Please try again.',
    success: 'Success',
    planSaved: 'Plan saved',
    
    // Errors
    permissionNeeded: 'Permission needed',
    cameraPermissionRequired: 'Camera permission is required to take photos.',
    error: 'Error',
    failedToPickImage: 'Failed to pick image. Please try again.',
    failedToAnalyze: 'Failed to analyze outfit. Please try again.',
    analysisLimitReached: 'Analysis Limit Reached',
    analysisLimitMessage: 'You\'ve reached your daily limit of {limit} analyses. Upgrade to Premium for unlimited analyses!',
    maybeLater: 'Maybe Later',
    upgradeNow: 'Upgrade Now',
  },
  tr: {
    // Header
    appName: 'Looks4Fun',
    appDescription: 'AI moda deÄŸerlendirmesi ile eÄŸlenceli gÃ¶rÃ¼nÃ¼n',
    
    // Settings
    settings: 'Ayarlar',
    language: 'Dil',
    selectLanguage: 'Dil SeÃ§in',
    english: 'Ä°ngilizce',
    turkish: 'TÃ¼rkÃ§e',
    apply: 'Uygula',
    changesSaved: 'DeÄŸiÅŸiklikler kaydedildi',
    
    // Upload Section
    uploadYourOutfit: 'KÄ±yafetinizi YÃ¼kleyin',
    uploadSubtitle: 'FotoÄŸraf Ã§ekin veya galeriden seÃ§in ve kÄ±yafetinizi deÄŸerlendirin',
    takePhoto: 'FotoÄŸraf Ã‡ek',
    chooseFromGallery: 'Galeriden SeÃ§',
    
    // Privacy
    privacyProtected: 'Gizlilik KorumalÄ±',
    privacyMatters: 'ðŸ”’ GizliliÄŸiniz Ã–nemli',
    privacyExplanation: 'YÃ¼zÃ¼nÃ¼z AI analizine gÃ¶nderilmeden Ã¶nce otomatik olarak maskelenir. Sadece kÄ±yafetiniz analiz edilir, kimliÄŸiniz gizli kalÄ±r.',
    faceProtected: 'YÃ¼z KorumalÄ±',
    
    // Categories
    chooseStyleCategory: 'Stil Kategorinizi SeÃ§in',
    categorySubtitle: 'HedeflediÄŸiniz stili seÃ§in ve daha hedefli bir analiz alÄ±n',
    sexy: 'Ã‡ekici',
    elegant: 'Zarif',
    casual: 'GÃ¼nlÃ¼k',
    naive: 'Masum',
    trendy: 'Trendy',
    anime: 'Anime',
    sixties: '60\'lar',
    sarcastic: 'TasarÄ±mcÄ± Ä°ÄŸnelemesi',
    allCategories: 'TÃ¼m Kategoriler',
    
    // Category descriptions
    sexyDesc: 'Cesur, Ã§ekici, kendinden emin',
    elegantDesc: 'Sofistike, rafine, zarif',
    casualDesc: 'Rahat, konforlu, gÃ¼nlÃ¼k',
    naiveDesc: 'TatlÄ±, masum, genÃ§',
    trendyDesc: 'Moda Ã¶ncÃ¼sÃ¼, gÃ¼ncel, ÅŸÄ±k',
    animeDesc: 'Kawaii, renkli, eÄŸlenceli',
    sixtiesDesc: 'Retro, mod, vintage',
    sarcasticDesc: 'ÃœnlÃ¼ bir tasarÄ±mcÄ±nÄ±n alaycÄ± Ã¼slubunda eleÅŸtiri',
    custom: 'Ã–zel',
    customDesc: 'Kendi stilinizi tanÄ±mlayÄ±n (Ã¶rn. "Bohem", "Y2K", "K-Pop")',
    enterCustomStyle: 'Ã–zel Stili Girin',
    customStylePlaceholder: 'Ã¶rn. Bohem, Cottagecore, Y2K, Minimalist',
    startCustomAnalysis: 'Ã–zel Analizi BaÅŸlat',
    allCategoriesDesc: '7 kategori iÃ§in sonuÃ§ alÄ±n',
    
    // Design Match
    findDesignMatchButtonHeader: 'Marka ve TasarÄ±mÄ± Bul',
    designMatchHeader: 'TasarÄ±m EÅŸleÅŸtirme',
    designMatchAnalysisResults: 'TasarÄ±m EÅŸleÅŸtirme Analiz SonuÃ§larÄ±',
    exactMatch: 'Tam EÅŸleÅŸme',
    closestSuggestions: 'En YakÄ±n Ã–neriler',
    confidence: 'GÃ¼ven DÃ¼zeyi',
    nonFashionTitle: 'Bu gÃ¶rsel bir moda Ã¼rÃ¼nÃ¼ deÄŸil',
    nonFashionSubtitle: 'KarikatÃ¼r/parodi/kurgu bir karakter gibi gÃ¶rÃ¼nÃ¼yor; birebir marka veya tasarÄ±m eÅŸleÅŸmesi olmayabilir.',
    nonFashionAction: 'Bunun yerine mizah tonu, renk paleti ve silÃ¼et benzerliÄŸi olan markalarÄ± Ã¶nerdik.',
    
    // Analysis
    analyzing: 'Analiz ediliyor...',
    rateMyOutfit: 'KÄ±yafetimi DeÄŸerlendir',
    yourStyleScore: 'Stil PuanÄ±nÄ±z',
    overallStyleScore: 'Genel Stil PuanÄ±',
    selectedStyle: 'SeÃ§ilen Stil:',
    analyzedForStyle: 'Analiz Edilen Stil:',
    analysisType: 'Analiz TÃ¼rÃ¼:',
    
    // Analysis sections
    styleAnalysis: 'Stil Analizi',
    colorCoordination: 'Renk Koordinasyonu',
    accessories: 'Aksesuarlar',
    overallHarmony: 'Genel Uyum',
    overallAnalysis: 'Genel Analiz',
    categoryBreakdown: 'Kategori DÃ¶kÃ¼mÃ¼',
    improvementSuggestions: 'Ä°yileÅŸtirme Ã–nerileri',
    trendInsights: 'Trend Ä°Ã§gÃ¶rÃ¼leri',
    viewTrendInsights: 'Trend Ä°Ã§gÃ¶rÃ¼lerini GÃ¶rÃ¼ntÃ¼le',
    generatingTrends: 'Trend iÃ§gÃ¶rÃ¼leri oluÅŸturuluyor...',
    emailSupport: 'E-Posta',
    export: 'DÄ±ÅŸa Aktar',
    exportAnalysis: 'Analizi DÄ±ÅŸa Aktar',
    analysisTakingLong: 'Bu iÅŸlem beklenenden uzun sÃ¼rÃ¼yor',
    photoMaybeIrrelevant: 'FotoÄŸraf seÃ§ilen stile uygun olmayabilir. FarklÄ± bir fotoÄŸraf denemek ister misiniz?',
    tryDifferentPhoto: 'FarklÄ± FotoÄŸraf Dene',
    continue: 'Devam Et',
    exported: 'DÄ±ÅŸa aktarÄ±ldÄ±',
    htmlDownloaded: 'HTML indirildi. E-postanÄ±za ekleyin.',
    
    // Buttons
    newPhoto: 'Yeni FotoÄŸraf',
    chooseDifferentPhoto: 'FarklÄ± FotoÄŸraf SeÃ§',
    changeStyleCategory: 'Stil Kategorisini DeÄŸiÅŸtir',
    changeRatingCategory: 'DeÄŸerlendirme Kategorisini DeÄŸiÅŸtir',
    backToCategories: 'Kategorilere DÃ¶n',
    rateNewOutfit: 'Yeni KÄ±yafet DeÄŸerlendir',
    back: 'Geri',
    save: 'Kaydet',

    // Extra action copy
    rateThisOutfit: 'Bu KÄ±yafeti Puanla',
    chooseCategoryForTargetedAnalysis: 'Hedefli analiz iÃ§in bir kategori seÃ§in veya genel puanlamayÄ± seÃ§in',
    allCategories7Results: 'TÃ¼m Kategoriler (7 SonuÃ§)',
    categoryBreakdown7: 'Kategori DÃ¶kÃ¼mÃ¼ - 7 AyrÄ± SonuÃ§',
    suggestionsFor: '{category} iÃ§in Ã–neriler:',
    noCategoryResults: 'Kategori sonuÃ§larÄ± mevcut deÄŸil',
    rateThisOutfitDifferentCategory: 'AynÄ± kÄ±yafeti farklÄ± bir stil kategorisiyle deÄŸerlendir',
    chooseDifferentStyleCategory: 'FarklÄ± Stil Kategorisi SeÃ§',
    clearHistory: 'GeÃ§miÅŸi Temizle',

    // History
    yourRatingHistory: 'DeÄŸerlendirme GeÃ§miÅŸiniz',
    historySubtitle: 'Gizlilik korumasÄ± ile son {count} kÄ±yafet deÄŸerlendirmeniz',
    maxItems: 'Maks',
    noRatingsYet: 'HenÃ¼z deÄŸerlendirme yok',
    noRatingsSubtext: 'BaÅŸlamak iÃ§in ilk kÄ±yafetinizi yÃ¼kleyin!',
    clearHistoryTitle: 'GeÃ§miÅŸi Temizle',
    clearHistoryConfirm: 'Bu iÅŸlem tÃ¼m kayÄ±tlÄ± deÄŸerlendirmeleri silecek. Emin misiniz?',
    cancel: 'Ä°ptal',
    clear: 'Temizle',
    cleared: 'Temizlendi',
    historyCleared: 'DeÄŸerlendirme geÃ§miÅŸiniz temizlendi.',
    couldNotClearHistory: 'GeÃ§miÅŸ temizlenemedi. LÃ¼tfen tekrar deneyin.',

    // Terms
    termsTitle: 'Åžartlar ve KoÅŸullar',
    copyrightNoticeTitle: 'Telif HakkÄ± Bildirimi',
    copyrightNotice: 'Telif HakkÄ± (Â©) 2024 Looks4Fun. TÃ¼m haklarÄ± saklÄ±dÄ±r. Ä°zinsiz kopyalama veya daÄŸÄ±tÄ±m yasaktÄ±r.',
    termsOfUseTitle: 'KullanÄ±m ÅžartlarÄ±',
    termsIntro: 'Bu uygulamayÄ± ("L4F") kullanarak aÅŸaÄŸÄ±daki ÅŸartlarÄ± ve koÅŸullarÄ± kabul etmiÅŸ olursunuz:',
    copyrightProtectionTitle: '1. Telif HakkÄ± KorumasÄ±',
    copyrightProtectionText: 'Bu uygulama ve tasarÄ±m, kod, grafikler, metin ve iÅŸlevsellik dahil ancak bunlarla sÄ±nÄ±rlÄ± olmamak Ã¼zere tÃ¼m iÃ§erikleri telif hakkÄ± yasalarÄ± ile korunmaktadÄ±r ve Looks4Funâ€™a aittir.',
    prohibitedActivitiesTitle: '2. YasaklÄ± Faaliyetler',
    prohibitedActivitiesBullets: 'Kesinlikle yasaktÄ±r:\nâ€¢ UygulamanÄ±n herhangi bir bÃ¶lÃ¼mÃ¼nÃ¼ kopyalamak, Ã§oÄŸaltmak veya daÄŸÄ±tmak\nâ€¢ Tersine mÃ¼hendislik yapmak veya kaynak kodu Ã§Ä±karmaya Ã§alÄ±ÅŸmak\nâ€¢ Bu uygulamaya dayalÄ± tÃ¼rev Ã§alÄ±ÅŸmalar oluÅŸturmak\nâ€¢ Ä°zin almadan ticari amaÃ§larla kullanmak\nâ€¢ Telif hakkÄ± bildirimlerini kaldÄ±rmak veya deÄŸiÅŸtirmek',
    privacyAndDataTitle: '3. Gizlilik ve Veri',
    privacyAndDataText: 'GizliliÄŸiniz bizim iÃ§in Ã¶nemlidir. AI analizi sÄ±rasÄ±nda kimliÄŸinizi korumak iÃ§in yÃ¼z maskeleme teknolojisi kullanÄ±lÄ±r. YalnÄ±zca kÄ±yafet verileri iÅŸlenir.',
    intellectualPropertyTitle: '4. Fikri MÃ¼lkiyet',
    intellectualPropertyText: 'Bu uygulamadaki tÃ¼m fikri mÃ¼lkiyet haklarÄ± Looks4Funâ€™a aittir. Bu ÅŸartlarda belirtilen kiÅŸisel, ticari olmayan kullanÄ±m dÄ±ÅŸÄ±nda kullanÄ±cÄ±ya hak tanÄ±nmaz.',
    violationsTitle: '5. Ä°hlaller',
    violationsText: 'Bu ÅŸartlarÄ±n ihlali, uygulamaya eriÅŸiminizin derhal sonlandÄ±rÄ±lmasÄ±na ve yasal iÅŸlemlere yol aÃ§abilir.',
    contactTitle: '6. Ä°letiÅŸim',
    contactText: 'Ä°zinler, lisans talepleri veya bu ÅŸartlarla ilgili sorular iÃ§in: Looks4Fun',
    acceptTermsLabel: 'Åžartlar ve KoÅŸullarÄ± Kabul Ediyorum',
    continueToApp: 'Uygulamaya Devam Et',

    // Subscription
    freePlan: 'Ãœcretsiz Plan',
    basicPlan: 'Temel Plan',
    premiumPlan: 'Premium Plan',
    ultimatePlan: 'Ultimate Plan',
    upgrade: 'YÃ¼kselt',
    manage: 'YÃ¶net',
    month: 'Ay',
    year: 'YÄ±l',
    analysesRemaining: 'BugÃ¼n {count} analiz hakkÄ±nÄ±z kaldÄ±',
    unlimitedAnalyses: 'SÄ±nÄ±rsÄ±z analiz hakkÄ±nÄ±z var',
    premiumFeatureTitle: 'Premium Ã–zellik',
    premiumAllMessage: '"TÃ¼m Kategoriler" analizi yalnÄ±zca Premium ve Ultimate abonelere aÃ§Ä±ktÄ±r. TÃ¼m 7 stil kategorisinde analiz iÃ§in ÅŸimdi yÃ¼kseltin!',
    premiumFeatureUnlock: 'Premium Ã–zellik - AÃ§mak iÃ§in yÃ¼kseltin',
    currentPlan: 'Mevcut Plan',
    expires: 'BitiÅŸ:',
    upgradeToPremiumHeader: 'L4F Premiumâ€™a YÃ¼kseltin',
    upgradeToPremiumSub: 'SÄ±nÄ±rsÄ±z stil analizi ve premium Ã¶zelliklerin kilidini aÃ§Ä±n',
    chooseYourPlan: 'PlanÄ±nÄ±zÄ± SeÃ§in',
    chooseYourPlanSub: 'Stil yolculuÄŸunuza uygun planÄ± seÃ§in',
    mostPopular: 'EN POPÃœLER',
    priceFree: 'Ãœcretsiz',
    currentPlanCta: 'Mevcut Plan',
    downgrade: 'DÃ¼ÅŸÃ¼r',
    subscribe: 'Abone Ol',
    loadingPlans: 'Abonelik planlarÄ± yÃ¼kleniyor...',

    // Checkout / Payments
    payment: 'Ã–deme',
    paymentMethod: 'Ã–deme YÃ¶ntemi',
    email: 'E-posta',
    password: 'Åžifre',
    firstName: 'Ad',
    surname: 'Soyad',
    cardNumber: 'Kart NumarasÄ±',
    expiry: 'Son Kullanma (AA/YY)',
    cvc: 'CVC',
    payNow: 'Åžimdi Ã–de',
    applePay: 'Apple Pay',
    googlePay: 'Google Pay',
    creditDebitCard: 'Kredi/Banka KartÄ±',
    cancelAction: 'Ä°ptal',
    enableTestMode: 'Test Modunu EtkinleÅŸtir',
    testModeActive: 'Test Modu (Kart Gerekmez)',
    testModeWarning: 'Test modu etkinleÅŸtirildi - Test iÃ§in Ã¶deme gerekmez',
    notAvailableOnWeb: 'Web Ã¶nizlemesinde kullanÄ±lamaz',
    notAvailableInExpoGo: 'Bu yÃ¶ntem maÄŸaza derlemesi gerektirir ve Expo Goâ€™da kullanÄ±lamaz. Demo iÃ§in kartÄ± kullanÄ±n.',

    // Plan Feature texts
    freeFeature1: 'GÃ¼nde 3 kÄ±yafet analizi',
    freeFeature2: 'Temel stil kategorileri',
    freeFeature3: 'SÄ±nÄ±rlÄ± geÃ§miÅŸ (5 Ã¶ÄŸe)',
    freeFeature4: 'Standart destek',
    freeFeature5: 'â€”',
    freeFeature6: 'â€”',

    basicFeature1: 'GÃ¼nde 15 kÄ±yafet analizi',
    basicFeature2: 'Temel stil kategorileri',
    basicFeature3: 'GeniÅŸletilmiÅŸ geÃ§miÅŸ (25 Ã¶ÄŸe)',
    basicFeature4: 'Standart destek',
    basicFeature5: 'Ä°yileÅŸtirme Ã–nerileri',
    basicFeature6: 'TasarÄ±m EÅŸleÅŸtirme',

    premiumFeature1: 'SÄ±nÄ±rsÄ±z kÄ±yafet analizi',
    premiumFeature2: 'TÃ¼m kategoriler (7 sonuÃ§)',
    premiumFeature3: 'SÄ±nÄ±rsÄ±z geÃ§miÅŸ',
    premiumFeature4: 'DetaylÄ± iyileÅŸtirme Ã¶nerileri',
    premiumFeature5: 'E-posta desteÄŸi',
    premiumFeature6: 'Analiz sonuÃ§larÄ±nÄ± dÄ±ÅŸa aktar',
    premiumFeature7: 'TasarÄ±m EÅŸleÅŸtirme',

    ultimateFeature1: 'Premiumâ€™daki her ÅŸey',
    ultimateFeature2: 'GeliÅŸmiÅŸ AI Analizi',
    ultimateFeature3: 'Ã–ncelikli destek',
    ultimateFeature4: 'Stil trend iÃ§gÃ¶rÃ¼leri',
    ultimateFeature5: 'Yeni Ã¶zelliklere erken eriÅŸim',
    ultimateFeature6: 'â€”',
    ultimateFeature7: 'â€”',
    ultimateFeature8: 'â€”',
    ultimateFeature9: 'â€”',
    ultimateFeature10: 'â€”',
    whyPremium: 'Neden L4F Premium?',
    benefitAdvancedAI: 'GeliÅŸmiÅŸ AI Analizi',
    benefitAdvancedAIDesc: 'En geliÅŸmiÅŸ AI modellerimizle detaylÄ± iÃ§gÃ¶rÃ¼ler alÄ±n',
    benefitUnlimited: 'SÄ±nÄ±rsÄ±z Analiz',
    benefitUnlimitedDesc: 'Ä°stediÄŸiniz zaman sÄ±nÄ±rsÄ±z sayÄ±da kÄ±yafet analiz edin',
    benefitPrivacy: 'Gizlilik KorumalÄ±',
    benefitPrivacyDesc: 'FotoÄŸraflarÄ±nÄ±z yÃ¼z maskeleme teknolojisiyle her zaman korunur',
    benefitGrowth: 'KiÅŸisel Stil GeliÅŸimi',
    benefitGrowthDesc: 'SÄ±nÄ±rsÄ±z geÃ§miÅŸ ve iÃ§gÃ¶rÃ¼lerle stil evriminizi takip edin',
    footerBullets: 'â€¢ Ä°stediÄŸiniz zaman iptal â€¢ Gizli Ã¼cret yok â€¢ GÃ¼venli Ã¶demeler',
    footerRenew: 'Abonelikler yenilemeden 24 saat Ã¶nce iptal edilmezse otomatik yenilenir',
    successTitle: 'BaÅŸarÄ±lÄ±! ðŸŽ‰',
    successWelcome: 'L4F {plan}\'a hoÅŸ geldiniz! AboneliÄŸiniz ÅŸimdi aktif.',
    startAnalyzing: 'Analize BaÅŸla',
    failedSubscription: 'Abonelik iÅŸlenemedi. LÃ¼tfen tekrar deneyin.',
    success: 'BaÅŸarÄ±lÄ±',
    planSaved: 'Plan baÅŸarÄ±yla kaydedildi',
    
    // Errors
    permissionNeeded: 'Ä°zin gerekli',
    cameraPermissionRequired: 'FotoÄŸraf Ã§ekmek iÃ§in kamera izni gereklidir.',
    error: 'Hata',
    failedToPickImage: 'Resim seÃ§ilemedi. LÃ¼tfen tekrar deneyin.',
    failedToAnalyze: 'KÄ±yafet analiz edilemedi. LÃ¼tfen tekrar deneyin.',
    analysisLimitReached: 'Analiz Limitine UlaÅŸÄ±ldÄ±',
    analysisLimitMessage: 'GÃ¼nlÃ¼k {limit} analiz limitinize ulaÅŸtÄ±nÄ±z. SÄ±nÄ±rsÄ±z analiz iÃ§in Premium\'a yÃ¼kseltin!',
    maybeLater: 'Belki Sonra',
    upgradeNow: 'Åžimdi YÃ¼kselt',
  },
};

export const [LanguageProvider, useLanguage] = createContextHook(() => {
  const [language, setLanguageState] = useState<Language>('en');
  const [userId, setUserId] = useState<string | null>(null);

  useEffect(() => {
    loadLanguage();
  }, [userId]);

  const storageKey = `app_language${userId ? `_${userId}` : ''}`;

  const loadLanguage = async () => {
    try {
      const savedLanguage = await AsyncStorage.getItem(storageKey);
      if (savedLanguage && (savedLanguage === 'en' || savedLanguage === 'tr')) {
        setLanguageState(savedLanguage as Language);
      }
    } catch (error) {
      console.log('Error loading language:', error);
    }
  };

  const setLanguage = async (lang: Language) => {
    try {
      const storageKeyLocal = `app_language${userId ? `_${userId}` : ''}`;
      await AsyncStorage.setItem(storageKeyLocal, lang);
      setLanguageState(lang);
    } catch (error) {
      console.log('Error saving language:', error);
    }
  };

  const setUserIdForContext = useCallback((id: string | null) => {
    setUserId(id);
  }, []);

  const t = (key: string): string => {
    const keys = key.split('.');
    let value: any = translations[language];
    
    for (const k of keys) {
      if (value && typeof value === 'object' && k in value) {
        value = value[k];
      } else {
        return key; // Return key if translation not found
      }
    }
    
    return typeof value === 'string' ? value : key;
  };

  const languageLabel = language === 'tr' ? 'TÃ¼rkÃ§e' : 'English';

  return {
    language,
    setLanguage,
    t,
    languageLabel,
    setUserIdForContext,
  };
});